define([],function(){"use strict";function a(a){console.log(a)}function b(a){if(!a)return null;var b={url:a.attr("data-uri"),data_type:a.attr("data-type"),mime_type:a.attr("data-mime-type")},c=b.url&&b.mime_type&&b.data_type;return c||(b=null),b}function c(b){a("initFlac"),k.attr("data-setup",'{ "techOrder": ["aurora"] }'),require(["aurora"],function(){require(["flac"],function(){require(["videojs_aurora"],function(){b()})})})}function d(b){a("initSilverlight"),require(["videojs_silverlight"],function(){b({silverlight:{xap:i},techOrder:["silverlight"]})})}function e(b,e){switch(a("determineMediaViewer: "+b),b){case"audio/flac":c(e);break;case"video/wmv":d(e);break;case"video/x-msvideo":d(e);break;case"video/x-ms-wmv":d(e);break;default:e()}}function f(a){j.src([{type:a.mime_type,src:a.url}]),j.play()}function g(b){return a("init video viewer with media_item:\n	"+JSON.stringify(b,null,4)),k=$(b.data_type),0==k.length?void a("no media dom element available"):b.mime_type?void require(["videojs"],function(){e(b.mime_type,function(c){if(j=videojs(k[0],{}),c){for(var d in c)videojs.options[d]=c[d];a("options full:\n	"+JSON.stringify(videojs.options,null,4))}f(b),$(".media-viewer").trigger("object-media-open")})}):void a("no mime type available")}var h="undefined"==typeof js_path?"/js/dist/lib/videojs/videojs.css":js_path+"lib/videojs/videojs.css",i="undefined"==typeof js_path?"/js/dist/lib/videojs-silverlight/video-js.xap":js_path+"lib/videojs-silverlight/video-js.xap",j=null,k=null;return $("head").append('<link rel="stylesheet" href="'+h+'" type="text/css"/>'),{init:function(a){g(a)},getItemFromMarkup:function(a){return b(a)}}});